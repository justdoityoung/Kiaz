function renderPostList(data,section,originalCard,url_prefix,target){const result=data.result;if(result&&originalCard){const posts=result;if(posts){posts.forEach((post)=>{var duplicatedCard=originalCard.cloneNode(true);if(duplicatedCard.querySelector(".gs-post-title")){duplicatedCard.querySelector(".gs-post-title").textContent=post.title;}
if(duplicatedCard.querySelector(".gs-post-image")){duplicatedCard.querySelector(".gs-post-image").src=post.front_image_src;}
if(duplicatedCard.querySelector(".gs-post-date")){duplicatedCard.querySelector(".gs-post-date").textContent=post.created_at;}
if(duplicatedCard.querySelector(".gs-post-shortbody")){duplicatedCard.querySelector(".gs-post-shortbody").textContent=post.short_body;}
if(duplicatedCard.querySelector(".gs-post-link")){duplicatedCard.querySelectorAll(".gs-post-link").forEach(function(link){link.href=url_prefix+post.id;link.target=target;});}
if(duplicatedCard.querySelector(".gs-post-category")){if(post.ModuleCategories&&post.ModuleCategories.length>0){duplicatedCard.querySelector(".gs-post-category").textContent=post.ModuleCategories[0].title;}else{duplicatedCard.querySelector(".gs-post-category").style.display="none";}}
section.querySelector(".gs-card-container").appendChild(duplicatedCard);});}}}
document.addEventListener("DOMContentLoaded",async function(){var sections=document.querySelectorAll(".gs-post-card-list");var api_base_url="https://api.greensoft.mn/api.php/post?site_id="+site_id;sections.forEach(function(section){var originalCard=section.querySelector(".gs-post-item-card");section.querySelector(".gs-card-container").innerHTML="";console.log(section.dataset.params);var api_url=api_base_url+"&"+section.dataset.params;var url_prefix=section.dataset.urlprefix;var target=section.dataset.target||"_self";fetch(api_url).then(function(response){return response.json();}).then(function(data){const result=data.result;if(result)
renderPostList(data,section,originalCard,url_prefix,target);});});});